@model Maximum.Models.Client
@{
    ViewData["Title"] = "Карточка клиента";
}

<div class="container-fluid">
    <!-- Заголовок страницы -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex align-items-center mb-3">
                <a href="@Url.Action("Index")" class="btn btn-outline-secondary me-3">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <div>
                    <h1 class="display-6 text-primary mb-2">
                        <i class="fas fa-user me-3"></i>Карточка клиента
                    </h1>
                    <p class="text-muted mb-0">Подробная информация о клиенте</p>
                </div>
            </div>
            <hr class="my-3">
        </div>
    </div>

    <div class="row">
        <!-- Основная информация -->
        <div class="col-lg-8 mb-4">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="fas fa-info-circle me-2"></i>Основная информация
                    </h5>
                </div>
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-muted">
                                <i class="fas fa-user me-2"></i>Полное имя
                            </label>
                            <div class="form-control-plaintext">
                                <strong class="fs-5">@Model.FullName</strong>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-muted">
                                <i class="fas fa-calendar me-2"></i>Дата рождения
                            </label>
                            <div class="form-control-plaintext">
                                @if (Model.BirthDate.HasValue)
                                {
                                    <strong class="fs-5">@Model.BirthDate.Value.ToString("dd.MM.yyyy")</strong>
                                    <br>
                                    <small class="text-muted">Возраст: @(DateTime.Now.Year - Model.BirthDate.Value.Year) лет</small>
                                }
                                else
                                {
                                    <span class="text-muted">Не указана</span>
                                }
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-muted">
                                <i class="fas fa-phone me-2"></i>Телефон
                            </label>
                            <div class="form-control-plaintext">
                                @if (!string.IsNullOrEmpty(Model.Phone))
                                {
                                    <a href="tel:@Model.Phone" class="text-decoration-none fs-5">
                                        <i class="fas fa-phone me-1"></i>@Model.Phone
                                    </a>
                                }
                                else
                                {
                                    <span class="text-muted">Не указан</span>
                                }
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-muted">
                                <i class="fas fa-envelope me-2"></i>Email
                            </label>
                            <div class="form-control-plaintext">
                                @if (!string.IsNullOrEmpty(Model.Email))
                                {
                                    <a href="mailto:@Model.Email" class="text-decoration-none fs-5">
                                        <i class="fas fa-envelope me-1"></i>@Model.Email
                                    </a>
                                }
                                else
                                {
                                    <span class="text-muted">Не указан</span>
                                }
                            </div>
                        </div>
                    </div>

                    @if (!string.IsNullOrEmpty(Model.Notes))
                    {
                        <div class="mb-3">
                            <label class="form-label text-muted">
                                <i class="fas fa-sticky-note me-2"></i>Заметки
                            </label>
                            <div class="form-control-plaintext">
                                <p class="mb-0">@Model.Notes</p>
                            </div>
                        </div>
                    }

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-muted">
                                <i class="fas fa-calendar-plus me-2"></i>Дата создания
                            </label>
                            <div class="form-control-plaintext">
                                <strong>@Model.CreatedAtUtc.ToString("dd.MM.yyyy HH:mm")</strong>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-muted">
                                <i class="fas fa-edit me-2"></i>Последнее обновление
                            </label>
                            <div class="form-control-plaintext">
                                @if (Model.UpdatedAtUtc.HasValue)
                                {
                                    <strong>@Model.UpdatedAtUtc.Value.ToString("dd.MM.yyyy HH:mm")</strong>
                                }
                                else
                                {
                                    <span class="text-muted">Не обновлялся</span>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Боковая панель -->
        <div class="col-lg-4 mb-4">
            <!-- Аватар и действия -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="fas fa-user-edit me-2"></i>Действия
                    </h5>
                </div>
                <div class="card-body p-4 text-center">
                    <div class="mb-4">
                        <div class="avatar-large bg-primary text-white mx-auto mb-3">
                            <i class="fas fa-user fa-3x"></i>
                        </div>
                        <h5 class="mb-1">@Model.FullName</h5>
                        <p class="text-muted mb-0">Клиент клиники</p>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">
                            <i class="fas fa-edit me-2"></i>Редактировать
                        </a>
                        <a href="@Url.Action("Calendar", "Schedule")" class="btn btn-outline-info">
                            <i class="fas fa-calendar-plus me-2"></i>Записать на прием
                        </a>
                        <a asp-action="Index" class="btn btn-outline-secondary">
                            <i class="fas fa-list me-2"></i>К списку клиентов
                        </a>
                    </div>
                </div>
            </div>

            <!-- Быстрая статистика -->
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-pie me-2"></i>Статистика
                    </h5>
                </div>
                <div class="card-body p-3">
                    <div class="row text-center">
                        <div class="col-6 mb-3">
                            <div class="border-end">
                                <h6 class="text-primary mb-1">0</h6>
                                <small class="text-muted">Записей</small>
                            </div>
                        </div>
                        <div class="col-6 mb-3">
                            <div>
                                <h6 class="text-success mb-1">0</h6>
                                <small class="text-muted">Посещений</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Анимация для карточек
            $('.card').hover(
                function() {
                    $(this).addClass('shadow');
                },
                function() {
                    $(this).removeClass('shadow');
                }
            );
        });
    </script>
}


